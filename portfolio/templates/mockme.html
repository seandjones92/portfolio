{% extends 'base.html' %}

{% block stylesheet %}
<style>
  pre#mockmeShell {
    overflow-x: auto;
    overflow-y: hidden;
    background-color: #263238;
    white-space: nowrap;
    padding: 5px;
  }

  h4 {
    display: flex;
    justify-content: center;
    align-items: center;
  }
</style>
{% endblock %}

{% block javascript %}
<script>
  function copyToClipboard() {
    /* Get the text field */
    var copyText = document.getElementById("textToMockify");

    /* Select the text field */
    copyText.select();
    copyText.setSelectionRange(0, 99999); /*For mobile devices*/

    /* Copy the text inside the text field */
    document.execCommand("copy");
  }
</script>
{% endblock %}

{% block title %}MockMe{% endblock %}

{% block content %}
<form method=post>

  <!-- Text entry -->
  <div class="mdl-grid">
    <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label mdl-cell mdl-cell--12-col">
      {{ form.textToMockify(class="mdl-textfield__input") }}
      <label class="mdl-textfield__label" for="textToMockify">Your text here...</label>
    </div>
  </div>

  <div class="mdl-grid" style="text-align:center;">

    <!-- Mocking button -->
    <div class="mdl-cell mdl-cell--6-col-desktop mdl-cell--4-col-tablet mdl-cell--2-col-phone">
      <button class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect">
        Mock Text
      </button>
    </div>

    <div class="mdl-cell mdl-cell--6-col-desktop mdl-cell--4-col-tablet mdl-cell--2-col-phone">

      <!-- Copy on click button -->
      <button onclick="copyToClipboard()" id="show-toast"
        class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect" type="button">Copy Text</button>
      <div id="copy-button-toast" class="mdl-js-snackbar mdl-snackbar">
        <div class="mdl-snackbar__text"></div>
        <button class="mdl-snackbar__action" type="button"></button>
      </div>
      <script>
        (function () {
          var snackbarContainer = document.querySelector('#copy-button-toast');
          var showToastButton = document.querySelector('#show-toast');
          showToastButton.addEventListener('click', function () {
            var data = { message: 'Copied to clipboard' };
            snackbarContainer.MaterialSnackbar.showSnackbar(data);
          });
        }());
      </script>

    </div>
  </div>

  <div class="mdl-grid">
    <div class="mdl-cell mdl-cell--12-col mdl-cell--hide-tablet mdl-cell--hide-phone">

      <h4>Use this on the terminal</h4>

      <p>
        This shell function should work with both Bash and ZSH to provide the same functionality you get here but in
        your terminal!<br>Once you've added the function below into your shell just run
        <code>mockme "whatever text you want"</code>.
      </p>

      <pre id="mockmeShell">
      <code>mockme() { curl -s -w '' -X POST https://seanjones.app/api/mockme -H "Content-type: application/json" -d '{"message": "'${1}'"}'}</code>
      </pre>

      <p>
        Copy the function into your terminal and press enter to test the function or put it in your
        <code>~/.bashrc</code> / <code>~/.zshrc</code> to have it available whenever you open your terminal.
      </p>

    </div>
  </div>


</form>
{% endblock %}